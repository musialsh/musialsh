---
---

<label class="relative inline-flex items-center cursor-pointer">
  <input type="checkbox" id="theme-toggle" class="sr-only peer" />
  <div
    class="w-8 h-[18px] bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-600 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3.5 after:w-3.5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-500"
  >
  </div>
</label>

<script is:inline>
  const themeToggleCheckbox = document.getElementById("theme-toggle");

  // Initial state setup
  if (
    localStorage.getItem("color-theme") === "dark" ||
    (!("color-theme" in localStorage) &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    themeToggleCheckbox.checked = true;
  } else {
    themeToggleCheckbox.checked = false;
  }

  // Handle toggling
  themeToggleCheckbox.addEventListener("change", function () {
    if (this.checked) {
      document.documentElement.setAttribute("data-theme", "dark");
      localStorage.setItem("color-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light");
      localStorage.setItem("color-theme", "light");
    }
  });
</script>
